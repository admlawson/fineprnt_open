@tailwind base;
@tailwind components;
@tailwind utilities;

/* fineprnt Design System - Enhanced UI with Glassmorphism */

/* Font loaded via index.html */

@layer base {
  :root {
    /* Core neutrals - clean paper aesthetic */
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;

    /* Glass surfaces with subtle paper texture */
    --glass: 0 0% 100% / 0.85;
    --glass-border: 0 0% 90% / 0.3;
    --glass-hover: 0 0% 100% / 0.95;

    /* Cards and surfaces - paper-like */
    --card: 0 0% 99%;
    --card-foreground: 0 0% 9%;
    --card-border: 0 0% 88% / 0.6;

    /* Elevated surfaces - subtle paper layers */
    --surface: 0 0% 98%;
    --surface-elevated: 0 0% 100%;
    --surface-glass: 0 0% 99% / 0.9;

    /* Popover and overlay - clean paper */
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;
    --popover-border: 0 0% 88% / 0.4;

    /* Primary brand — clean black */
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 100%;
    --primary-hover: 0 0% 15%;
    --primary-active: 0 0% 20%;
    --primary-glass: 0 0% 9% / 0.1;
    --primary-soft: 0 0% 96%;

    /* Secondary - soft paper grays */
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;
    --secondary-hover: 0 0% 92%;
    --secondary-glass: 0 0% 96% / 0.9;

    /* Muted content - readable gray hierarchy */
    --muted: 0 0% 95%;
    --muted-foreground: 0 0% 45%;
    --muted-glass: 0 0% 95% / 0.7;

    /* Accent — subtle gray (used sparingly) */
    --accent: 0 0% 20%;
    --accent-foreground: 0 0% 100%;
    --accent-hover: 0 0% 25%;
    --accent-glass: 0 0% 20% / 0.1;
    --accent-soft: 0 0% 97%;

    /* Destructive - Refined error red */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --destructive-hover: 0 84% 55%;
    --destructive-glass: 0 84% 60% / 0.1;
    --destructive-soft: 0 84% 97%;

    /* Borders and inputs - clean paper lines */
    --border: 0 0% 88% / 0.8;
    --border-strong: 0 0% 80%;
    --input: 0 0% 100%;
    --input-border: 0 0% 88% / 0.6;
    --ring: 0 0% 9% / 0.3;

    /* Sidebar - clean paper aesthetic */
    --sidebar-background: 0 0% 100% / 0.95;
    --sidebar-foreground: 0 0% 9%;
    --sidebar-primary: 0 0% 9%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 96% / 0.9;
    --sidebar-accent-foreground: 0 0% 9%;
    --sidebar-border: 0 0% 88% / 0.4;
    --sidebar-ring: 0 0% 9% / 0.3;
    --sidebar-glass: 0 0% 100% / 0.98;

    /* Chat interface - paper-like bubbles */
    --chat-message-user: 0 0% 9%;
    --chat-message-assistant: 0 0% 96%;
    --chat-input: 0 0% 100%;
    --chat-bubble-glass: 0 0% 99% / 0.9;

    /* Gradients — paper-like subtle transitions */
    --gradient-primary: linear-gradient(135deg, hsl(0 0% 9%) 0%, hsl(0 0% 15%) 50%, hsl(0 0% 20%) 100%);
    --gradient-hero: linear-gradient(135deg, hsl(0 0% 100%) 0%, hsl(0 0% 98%) 100%);
    --gradient-glass: linear-gradient(135deg, hsl(0 0% 100% / 0.1) 0%, hsl(0 0% 100% / 0.05) 100%);
    --gradient-surface: linear-gradient(135deg, hsl(0 0% 100%) 0%, hsl(0 0% 99%) 100%);

    /* Paper-like shadows with subtle depth */
    --shadow-soft: 0 1px 3px 0 hsl(0 0% 0% / 0.06), 0 1px 2px -1px hsl(0 0% 0% / 0.06);
    --shadow-medium: 0 4px 6px -1px hsl(0 0% 0% / 0.08), 0 2px 4px -2px hsl(0 0% 0% / 0.08);
    --shadow-strong: 0 10px 15px -3px hsl(0 0% 0% / 0.1), 0 4px 6px -4px hsl(0 0% 0% / 0.1);
    --shadow-glass: 0 8px 32px 0 hsl(0 0% 0% / 0.06);
    --shadow-elevated: 0 20px 25px -5px hsl(0 0% 0% / 0.08), 0 8px 10px -6px hsl(0 0% 0% / 0.08);

    /* Enhanced animations with easing */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-medium: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-spring: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);

    /* Spacing scale (4/8/16/24/32/48/64px) */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
    --space-3xl: 4rem;

    /* Enhanced radius scale */
    --radius-sm: 0.375rem;
    --radius: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;
    --radius-2xl: 2rem;
  }

  .dark {
    /* Core neutrals - inverted paper aesthetic */
    --background: 0 0% 8%;
    --foreground: 0 0% 96%;

    /* Glass surfaces - dark paper texture */
    --glass: 0 0% 10% / 0.9;
    --glass-border: 0 0% 20% / 0.4;
    --glass-hover: 0 0% 12% / 0.95;

    /* Cards and surfaces - dark paper layers */
    --card: 0 0% 10%;
    --card-foreground: 0 0% 96%;
    --card-border: 0 0% 20% / 0.6;

    /* Elevated dark surfaces - subtle paper depth */
    --surface: 0 0% 9%;
    --surface-elevated: 0 0% 12%;
    --surface-glass: 0 0% 11% / 0.9;

    /* Popover - dark paper overlay */
    --popover: 0 0% 10%;
    --popover-foreground: 0 0% 96%;
    --popover-border: 0 0% 20% / 0.5;

    /* Primary brand — clean white on dark */
    --primary: 0 0% 96%;
    --primary-foreground: 0 0% 8%;
    --primary-hover: 0 0% 90%;
    --primary-active: 0 0% 85%;
    --primary-glass: 0 0% 96% / 0.15;
    --primary-soft: 0 0% 15%;

    /* Secondary - dark paper grays */
    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 96%;
    --secondary-hover: 0 0% 18%;
    --secondary-glass: 0 0% 15% / 0.9;

    /* Muted content - dark gray hierarchy */
    --muted: 0 0% 15%;
    --muted-foreground: 0 0% 60%;
    --muted-glass: 0 0% 15% / 0.8;

    /* Accent — subtle light gray */
    --accent: 0 0% 80%;
    --accent-foreground: 0 0% 8%;
    --accent-hover: 0 0% 75%;
    --accent-glass: 0 0% 80% / 0.15;
    --accent-soft: 0 0% 12%;

    /* Destructive - Enhanced dark red */
    --destructive: 0 84% 65%;
    --destructive-foreground: 210 40% 98%;
    --destructive-hover: 0 84% 70%;
    --destructive-glass: 0 84% 65% / 0.15;
    --destructive-soft: 0 84% 8%;

    /* Borders and inputs - dark paper lines */
    --border: 0 0% 20% / 0.8;
    --border-strong: 0 0% 25%;
    --input: 0 0% 10%;
    --input-border: 0 0% 20% / 0.6;
    --ring: 0 0% 96% / 0.4;

    /* Sidebar - dark paper aesthetic */
    --sidebar-background: 0 0% 9% / 0.95;
    --sidebar-foreground: 0 0% 96%;
    --sidebar-primary: 0 0% 96%;
    --sidebar-primary-foreground: 0 0% 8%;
    --sidebar-accent: 0 0% 15% / 0.9;
    --sidebar-accent-foreground: 0 0% 96%;
    --sidebar-border: 0 0% 20% / 0.4;
    --sidebar-ring: 0 0% 96% / 0.4;
    --sidebar-glass: 0 0% 10% / 0.98;

    /* Chat interface - dark paper bubbles */
    --chat-message-user: 0 0% 96%;
    --chat-message-assistant: 0 0% 15%;
    --chat-input: 0 0% 10%;
    --chat-bubble-glass: 0 0% 12% / 0.9;

    /* Dark gradients — paper-like subtle transitions */
    --gradient-primary: linear-gradient(135deg, hsl(0 0% 96%) 0%, hsl(0 0% 90%) 50%, hsl(0 0% 85%) 100%);
    --gradient-hero: linear-gradient(135deg, hsl(0 0% 8%) 0%, hsl(0 0% 10%) 100%);
    --gradient-glass: linear-gradient(135deg, hsl(0 0% 10% / 0.1) 0%, hsl(0 0% 10% / 0.05) 100%);
    --gradient-surface: linear-gradient(135deg, hsl(0 0% 8%) 0%, hsl(0 0% 10%) 100%);

    /* Dark paper shadows with depth */
    --shadow-soft: 0 1px 3px 0 hsl(0 0% 0% / 0.4), 0 1px 2px -1px hsl(0 0% 0% / 0.4);
    --shadow-medium: 0 4px 6px -1px hsl(0 0% 0% / 0.5), 0 2px 4px -2px hsl(0 0% 0% / 0.5);
    --shadow-strong: 0 10px 15px -3px hsl(0 0% 0% / 0.5), 0 4px 6px -4px hsl(0 0% 0% / 0.5);
    --shadow-glass: 0 8px 32px 0 hsl(0 0% 0% / 0.4);
    --shadow-elevated: 0 20px 25px -5px hsl(0 0% 0% / 0.5), 0 8px 10px -6px hsl(0 0% 0% / 0.5);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Source Sans 3', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  }

  .font-courier {
    font-family: 'Courier Prime', 'Courier New', Courier, monospace;
  }

  /* Glass effect utilities */
  .glass {
    @apply backdrop-blur-xl bg-glass border border-glass-border;
  }

  .glass-hover {
    @apply hover:bg-glass-hover;
  }

  .surface-glass {
    @apply bg-surface-glass backdrop-blur-sm;
  }
}

@layer utilities {
  /* Icon shake used by hero FileBadge */
  @keyframes gentleShake { 0%,100%{ transform: translateY(0) rotate(0deg); } 25%{ transform: translateY(-2px) rotate(-1.2deg);} 50%{ transform: translateY(1px) rotate(0.8deg);} 75%{ transform: translateY(-1px) rotate(-0.6deg);} }
  .shake { animation: gentleShake 3.8s ease-in-out infinite; }
  .shake.delay-1 { animation-delay: .5s }
  .shake.delay-2 { animation-delay: 1s }
  .shake.delay-3 { animation-delay: 1.5s }

  @media (prefers-reduced-motion: reduce) { .shake { animation: none !important; } }
  /* Enhanced transitions */
  .transition-spring {
    transition: var(--transition-spring);
  }

  .transition-slow {
    transition: var(--transition-slow);
  }

  /* Glass morphism utilities */
  .backdrop-blur-glass {
    backdrop-filter: blur(12px);
  }

  .backdrop-blur-strong {
    backdrop-filter: blur(20px);
  }

  /* Smooth focus states */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }

  /* Enhanced hover states */
  .hover-lift {
    @apply transition-all duration-200 hover:translate-y-[-2px] hover:shadow-medium;
  }

  .hover-glow {
    @apply transition-all duration-200 hover:shadow-glass;
  }
}
/* ===== Hero / Section transition helpers ===== */

/* Make hero text readable over media */
/* Removed text shadows for clean text appearance */

/* Responsive media fit for hero image/video */
/* Default to cover to avoid side gaps; fall back to contain on very tall/narrow screens */
.hero-media {
  object-fit: cover;
}

@media (max-aspect-ratio: 4/5) {
  /* On very tall/narrow screens, contain so important edges remain visible */
  .hero-media {
    object-fit: contain;
  }
}

/* Fade the bottom of the hero into the next section - very subtle */
.hero-fade {
  position: absolute;
  inset-inline: 0;
  bottom: 0;
  height: 30px; /* much smaller fade */
  background: linear-gradient(to bottom, hsla(0, 0%, 100%, 0) 0%, hsla(0, 0%, 100%, 0.8) 100%);
  pointer-events: none;
}

/* Optional: soft “light spill” at the bottom of the hero */
.hero-glow {
  position: absolute;
  inset-inline: 0;
  bottom: 0;
  height: 160px;
  background: radial-gradient(120% 120% at 50% 100%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0) 60%);
  pointer-events: none;
  mix-blend-mode: screen;
}

/* Dark-mode variants */
.dark .hero-fade,
[data-theme="dark"] .hero-fade {
  background: linear-gradient(to bottom, hsla(0, 0%, 8%, 0) 0%, hsla(0, 0%, 8%, 0.8) 100%);
}
.dark .hero-glow,
[data-theme="dark"] .hero-glow {
  background: radial-gradient(120% 120% at 50% 100%, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0) 60%);
  mix-blend-mode: normal;
}

/* OS-level dark preference fallback (if no theme class is set) */
@media (prefers-color-scheme: dark) {
  .hero-fade:not(.force-light) {
    background: linear-gradient(to bottom, hsla(0, 0%, 8%, 0) 0%, hsla(0, 0%, 8%, 0.8) 100%);
  }
  .hero-glow:not(.force-light) {
    background: radial-gradient(120% 120% at 50% 100%, hsla(0, 0%, 8%, 0.55) 0%, hsla(0, 0%, 8%, 0) 60%);
    mix-blend-mode: normal;
  }
}

/* First section after hero: very soft off-white */
.section-muted {
  background-color: hsl(var(--muted)); /* uses your design token */
}

/* Optional subtle divider on the first light section */
.has-top-divider { position: relative; }
.has-top-divider::before {
  content: "";
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(960px, 92%);
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(0,0,0,0.08), transparent);
  pointer-events: none;
}
.dark .has-top-divider::before,
[data-theme="dark"] .has-top-divider::before {
  background: linear-gradient(to right, transparent, rgba(255,255,255,0.08), transparent);
}

/* Clamp hero copy width on very wide screens */
@media (min-width: 1280px) {
  .hero-overlay {
    max-width: 54rem; /* ~864px */
    margin-left: auto;
    margin-right: auto;
  }
}

/* Ensure mobile hamburger menu is properly positioned and clickable */
.mobile-hamburger {
  position: fixed;
  top: max(6rem, calc(env(safe-area-inset-top) + 4rem));
  left: max(1rem, env(safe-area-inset-left));
  z-index: 9999;
  pointer-events: auto;
  touch-action: manipulation;
}

/* Additional mobile fixes */
@media (max-width: 767px) {
  .mobile-hamburger {
    top: max(5rem, calc(env(safe-area-inset-top) + 3rem));
    left: max(0.5rem, env(safe-area-inset-left));
  }
}
